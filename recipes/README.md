How It Works

The system loads recipe data from a JSON file using a custom Django management command.

Process Flow:
Reads the JSON file.
Cleans invalid values using the clean_nan() function.
Checks if the recipe title already exists in the database.
If the recipe does not exist then creates a new record.
If the recipe already exists then skips the record.
Displays the total number of created and skipped records.
This prevents duplicate entries and ensures data consistency.


Management Command Usage:
Load Recipes (Default File):
python manage.py load_recipes
This loads data from the default JSON file configured inside the command.

Load Recipes (Custom File):
python manage.py load_recipes --file=data.json
This allows loading data from a custom JSON file.

Database Schema (SQL Migration Output):
To view the SQL generated by Django for migration:
python manage.py sqlmigrate recipe_list 0001
Example Output:
BEGIN;

CREATE TABLE "recipe_list_recipe" (
    "id" integer NOT NULL PRIMARY KEY AUTOINCREMENT,
    "cuisine" text NOT NULL,
    "title" text NOT NULL,
    "rating" real NULL,
    "prep_time" integer NULL,
    "cook_time" integer NULL,
    "total_time" integer NULL,
    "description" text NOT NULL,
    "nutrients" text NULL CHECK ((JSON_VALID("nutrients") OR "nutrients" IS NULL)),
    "serves" text NULL
);
COMMIT;
This creates the Recipe table with appropriate field types and constraints.

API Testing Instructions

Base URL:

http://127.0.0.1:8000/api/

Endpoint 1: Get All Recipes (Paginated)

URL:

GET /api/recipes?page=1&limit=10

Example:
http://127.0.0.1:8000/api/recipes?page=1&limit=10

Parameters:
Parameter	Description
page	Page number
limit	Number of records per page
Sample Response:
{
  "page": 1,
  "limit": 10,
  "total_records": 150,
  "data": [
    {
      "title": "Apple Pie",
      "cuisine": "American",
      "rating": 4.6
    }
  ]
}

Endpoint 2: Search Recipes

URL:

GET /api/recipes/search

Example:
http://127.0.0.1:8000/api/recipes/search?title=pie&rating=>=4.5&calories=<=400&cuisine=southern

Query Parameters:
Parameter	Description
title	Search by recipe title
rating	Filter by rating (e.g., >=4.5)
calories	Filter by calories (e.g., <=400)
cuisine	Filter by cuisine type
Sample Response:
{
  "results": [
    {
      "title": "Southern Peach Pie",
      "rating": 4.7,
      "calories": 380,
      "cuisine": "Southern"
    }
  ]
}
